#!/usr/bin/env bash
# Configure domains to point to webservers

display_info() {
    local subdomain="$1"
    local domain="$2"

    # Get DNS information for the subdomain
    dns_info=$(dig +short "$subdomain.$domain")

    if [ -z "$dns_info" ]; then
        echo "No record found for subdomain $subdomain"
    else
        # Extract record type and destination
        record_type=$(echo "$dns_info" | awk '{print $4}')
        destination=$(echo "$dns_info" | awk '{print $1}')
        echo "The subdomain $subdomain is a $record_type record and points to $destination"
    fi
}

main() {
    local domain="$1"
    local subdomain="$2"

    # Default subdomains to check
    local subdomains=("www" "lb-01" "web-01" "web-02")

    # If subdomain provided, only check that subdomain
    if [ -n "$subdomain" ]; then
        display_info "$subdomain" "$domain"
    else
        # Display information for default subdomains
        for sub in "${subdomains[@]}"; do
            display_info "$sub" "$domain"
        done
    fi
}

main "$1" "$2"
